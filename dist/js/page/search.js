"use strict";define(["jquery","hand"],function(a,t){var e=a(".search_nav").html(),n=t.compile(e),i=a(".search_list").html(),s=t.compile(i),c=window.localStorage,r=[],o=JSON.parse(c.getItem("search"))||[];function l(n){var e={items:[]};if(n){if(0===r.filter(function(t){return new RegExp(n,"g").test(t.ad_name)}).length){var t={};t.ad_name=n,o.push(t),c.setItem("search",JSON.stringify(o))}a.ajax({url:"/book/search?",async:!1,dataType:"json",success:function(t){e.items=t.items.filter(function(t,e){return new RegExp(n).test(t.title)})}}),a(".main").html(s(e))}}a.ajaxSettings.async=!1,a.getJSON("/book/searchkey",function(t){r=t.ads=t.ads.concat(o),a(".main").html(n(t))}),a(".nav").on("click","li",function(){l(a.trim(a(this).html()))}),a(".seek span").on("click",function(){l(a.trim(a(".seek input").val()))})});